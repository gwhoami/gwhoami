{"ast":null,"code":"var _jsxFileName = \"D:\\\\Git-Repo\\\\gwhoami\\\\react-gwhoami\\\\src\\\\modalDialog\\\\userPanel.js\",\n    _s = $RefreshSig$();\n\nimport { faFemale, faMale, faTimes, faUserCheck, faUserTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Scrollbars from \"react-custom-scrollbars\";\nimport { InputDOB, InputEmail, InputPhone, InputRadio, InputSelect, InputText, PasswordCheck } from \"../component/forms\";\nimport { apiPostCall } from \"../helper/API\";\nimport Constants from \"../helper/Constants\";\nimport { TinyLoader } from \"../helper/formElements\";\nimport ToastMessage from \"../toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserPanelDialog = /*#__PURE__*/_s( /*#__PURE__*/React.memo(_c = _s(_ref => {\n  _s();\n\n  let {\n    uiref,\n    dataRef\n  } = _ref;\n  const [ui, uiRefresh] = useState(-1);\n  const regRef = useRef({ ...(dataRef.current.selectedIndex === -1 ? Constants.user_empty_form : dataRef.current.list[dataRef.current.selectedIndex]),\n    dob: dataRef.current.selectedIndex === -1 ? '' : new Date(dataRef.current.list[dataRef.current.selectedIndex].dob)\n  });\n  const isNew = useRef(dataRef.current.selectedIndex === -1);\n  const stateList = useRef({\n    'United State': [...Constants.usa],\n    'India': [...Constants.india]\n  });\n\n  const formSubmit = e => {\n    e.preventDefault();\n    regRef.current.isSubmit = true;\n    regRef.current.formChanges = Date.now();\n    uiRefresh(Date.now()); //console.log(document.querySelectorAll('.mark-err').length);\n  };\n\n  const countryCallback = useCallback(() => {\n    regRef.current.state = '';\n    regRef.current.phonecode = Constants.phoneCode[regRef.current.country];\n    document.querySelector('#state').selectedIndex = 0;\n    uiRefresh(Date.now());\n  }, []);\n  const stateCallback = useCallback(() => {\n    uiRefresh(Date.now());\n  }, []);\n  const dobCallback = useCallback(() => {\n    uiRefresh(Date.now());\n  }, []);\n  useEffect(() => {\n    if (regRef.current.formChanges === undefined || regRef.current.formChanges === -1) return; //alert(typeof regRef.current.formChanges);\n\n    let first_err = document.querySelector('.mark-err');\n\n    if (first_err) {\n      first_err.scrollIntoView({\n        block: 'end',\n        behavior: 'smooth'\n      });\n      return;\n    }\n\n    regRef.current.isLoading = true;\n    uiRefresh(Date.now());\n    let data = { ...regRef.current\n    };\n    delete data.isSubmit;\n    delete data.formChanges;\n    delete data.isLoading; //console.log(JSON.stringify(data));\n\n    let params = {};\n\n    if (data._id) {\n      params.id = data._id;\n      params.data = JSON.stringify(data);\n    } else params = { ...data\n    };\n\n    const apiCall = async () => {\n      const res = await apiPostCall(`/api/user/${data._id ? 'userbasicupdate' : 'userbasicreg'}`, params);\n\n      if (res.isError) {\n        ToastMessage({\n          type: \"error\",\n          message: res.Error.response.data.message,\n          timeout: 2000\n        });\n        regRef.current.isLoading = false;\n        uiRefresh(Date.now());\n      } else {\n        regRef.current.isLoading = false;\n\n        if (dataRef.current.selectedIndex !== -1) {\n          dataRef.current.list[dataRef.current.selectedIndex] = { ...data\n          };\n          ToastMessage({\n            type: \"success\",\n            message: \"Successfully updated!\",\n            timeout: 1500\n          });\n        } else {\n          dataRef.current.list.push({ ...data\n          });\n          ToastMessage({\n            type: \"success\",\n            message: \"Successfully Registered!\",\n            timeout: 1500\n          });\n        }\n\n        dataRef.current.toggleModal(); //uiRefresh(Date.now());\n      }\n    };\n\n    apiCall(); // eslint-disable-next-line\n  }, [regRef.current.formChanges]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    noValidate: true,\n    onSubmit: e => formSubmit(e),\n    className: \"w-full\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container w-full flex-1 flex flex-col items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white px-2 py-6 rounded text-black w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full px-2\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes,\n            className: \"absolute top-2 right-5 cursor-pointer\",\n            onClick: dataRef.current.toggleModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mb-8 text-3xl\",\n            children: isNew.current ? 'New Registration' : 'Edit Registration'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Scrollbars, {\n          className: \"overflow-auto\",\n          style: {\n            height: \"70vh\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5\",\n            children: [/*#__PURE__*/_jsxDEV(InputText, {\n              styleClass: \"flex flex-col mb-4 \",\n              formKey: \"name\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Name\",\n              placeholder: \"Name\",\n              required: \"Name is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputEmail, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"username\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Email\",\n              placeholder: \"Email\",\n              required: \"Email is required\",\n              disabled: !isNew.current\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this), isNew.current && /*#__PURE__*/_jsxDEV(PasswordCheck, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"password\",\n              ui: ui,\n              formRef: regRef,\n              uiRefresh: ui\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 47\n            }, this), /*#__PURE__*/_jsxDEV(InputRadio, {\n              styleClass: \"flex flex-col mb-3\",\n              formKey: \"business\",\n              formRef: regRef,\n              ui: ui,\n              name: \"business\",\n              label: \"Individual/Business\",\n              values: ['Individual', 'Business'],\n              required: \"Individual/Business is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputDOB, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"dob\",\n              ID: \"dob\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"DOB\",\n              placeholder: \"DOB\",\n              required: \"Date of birth is required\",\n              callback: dobCallback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputRadio, {\n              styleClass: \"flex flex-col mb-3\",\n              formKey: \"gender\",\n              formRef: regRef,\n              ui: ui,\n              name: \"gender\",\n              label: \"Gender\",\n              values: ['Male', 'Female', 'Other'],\n              icons: [faMale, faFemale],\n              required: \"This field is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputText, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"city\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Country/City\",\n              placeholder: \"Country/City\",\n              required: \"Country/City is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputText, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"zipcode\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Zip/Postal\",\n              placeholder: \"Zip/Postal\",\n              required: \"Zip/Postal is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputSelect, {\n              styleClass: \"flex flex-col mb-4 \",\n              formKey: \"country\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Country\",\n              options: [\"United State\", \"India\"],\n              placeholder: \"Select country\",\n              required: \"Country is required\",\n              callback: countryCallback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputSelect, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"state\",\n              ID: \"state\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"State\",\n              options: stateList.current[regRef.current.country] || [],\n              placeholder: \"Select state\",\n              required: \"State is required\",\n              callback: stateCallback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputPhone, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"phone\",\n              ID: \"phone\",\n              formRef: regRef,\n              uiRefresh: ui,\n              label: \"Phone\",\n              code: \"phonecode\",\n              placeholder: \"Phone/Mobile\",\n              required: \"Phone is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputRadio, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"minor\",\n              formRef: regRef,\n              ui: ui,\n              name: \"minor\",\n              label: \"Is the user being minor (less than 18 years old)\",\n              values: ['Yes', 'No'],\n              required: \"This field is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputRadio, {\n              styleClass: \"flex flex-col mb-4\",\n              formKey: \"approved\",\n              formRef: regRef,\n              ui: ui,\n              name: \"approved\",\n              label: \"Approved\",\n              icons: [faUserCheck, faUserTimes],\n              values: ['Yes', 'No'],\n              colors: ['rgb(101 163 13)', 'rgb(239 68 68)'],\n              required: \"This field is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex mb-4 justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"h-14 px-12 m-2 text-indigo-100 transition-colors duration-150 bg-dodge-b rounded-full shadow-md shadow-gray-500 focus:shadow-outline hover:bg-dodge-d\",\n                children: regRef.current.isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-12 flex justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(TinyLoader, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 106\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 64\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: \"Submit\"\n                }, void 0, false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}, \"SbicwTCGliN+RxiwG2CUur9Z5MQ=\")), \"SbicwTCGliN+RxiwG2CUur9Z5MQ=\");\n\n_c2 = UserPanelDialog;\nexport default UserPanelDialog;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserPanelDialog$React.memo\");\n$RefreshReg$(_c2, \"UserPanelDialog\");","map":{"version":3,"sources":["D:/Git-Repo/gwhoami/react-gwhoami/src/modalDialog/userPanel.js"],"names":["faFemale","faMale","faTimes","faUserCheck","faUserTimes","FontAwesomeIcon","React","useCallback","useEffect","useRef","useState","Scrollbars","InputDOB","InputEmail","InputPhone","InputRadio","InputSelect","InputText","PasswordCheck","apiPostCall","Constants","TinyLoader","ToastMessage","UserPanelDialog","memo","uiref","dataRef","ui","uiRefresh","regRef","current","selectedIndex","user_empty_form","list","dob","Date","isNew","stateList","usa","india","formSubmit","e","preventDefault","isSubmit","formChanges","now","countryCallback","state","phonecode","phoneCode","country","document","querySelector","stateCallback","dobCallback","undefined","first_err","scrollIntoView","block","behavior","isLoading","data","params","_id","id","JSON","stringify","apiCall","res","isError","type","message","Error","response","timeout","push","toggleModal","height"],"mappings":"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","sourcesContent":["import { faFemale, faMale, faTimes, faUserCheck, faUserTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport Scrollbars from \"react-custom-scrollbars\";\r\nimport { InputDOB, InputEmail, InputPhone, InputRadio, InputSelect, InputText, PasswordCheck } from \"../component/forms\";\r\nimport { apiPostCall } from \"../helper/API\";\r\nimport Constants from \"../helper/Constants\";\r\nimport { TinyLoader } from \"../helper/formElements\";\r\nimport ToastMessage from \"../toast\";\r\nconst UserPanelDialog = React.memo(({uiref, dataRef}) => {\r\n    const [ui, uiRefresh] = useState(-1);\r\n    const regRef = useRef({\r\n        ...(dataRef.current.selectedIndex === -1 ? Constants.user_empty_form : dataRef.current.list[dataRef.current.selectedIndex]),\r\n        dob: dataRef.current.selectedIndex === -1 ? '' : new Date(dataRef.current.list[dataRef.current.selectedIndex].dob)\r\n    });\r\n    const isNew = useRef(dataRef.current.selectedIndex === -1);\r\n    const stateList = useRef({\r\n        'United State': [...Constants.usa],\r\n        'India': [...Constants.india]\r\n    });\r\n    const formSubmit = (e) => {\r\n        e.preventDefault();\r\n        regRef.current.isSubmit = true;\r\n        regRef.current.formChanges = Date.now();\r\n        uiRefresh(Date.now());\r\n        //console.log(document.querySelectorAll('.mark-err').length);\r\n    }\r\n    const countryCallback = useCallback(() => {\r\n        regRef.current.state = '';\r\n        regRef.current.phonecode = Constants.phoneCode[regRef.current.country];\r\n        document.querySelector('#state').selectedIndex = 0;\r\n        uiRefresh(Date.now());\r\n    }, []);\r\n    const stateCallback = useCallback(() => {\r\n        uiRefresh(Date.now());\r\n    }, []);\r\n    const dobCallback = useCallback(() => {\r\n        uiRefresh(Date.now());\r\n    }, []);\r\n    useEffect(()=>{\r\n        if (regRef.current.formChanges === undefined || regRef.current.formChanges === -1) return;\r\n        //alert(typeof regRef.current.formChanges);\r\n        let first_err = document.querySelector('.mark-err');\r\n        if (first_err) {\r\n            first_err.scrollIntoView({ block: 'end',  behavior: 'smooth' });\r\n            return;\r\n        }\r\n        regRef.current.isLoading = true;\r\n        uiRefresh(Date.now());\r\n        let data = {...regRef.current}\r\n        delete data.isSubmit;\r\n        delete data.formChanges;\r\n        delete data.isLoading;\r\n        //console.log(JSON.stringify(data));\r\n        let params = {}\r\n        if (data._id) {\r\n            params.id = data._id;\r\n            params.data = JSON.stringify(data);\r\n        } else params = {...data}\r\n        const apiCall = async()=> {\r\n            const res = await apiPostCall(`/api/user/${data._id ? 'userbasicupdate' : 'userbasicreg'}`,params);\r\n            if (res.isError) {\r\n                ToastMessage({ type: \"error\", message: res.Error.response.data.message, timeout: 2000 });\r\n                regRef.current.isLoading = false;\r\n                uiRefresh(Date.now());\r\n            } else {\r\n                regRef.current.isLoading = false;\r\n                if (dataRef.current.selectedIndex !== -1) {\r\n                    dataRef.current.list[dataRef.current.selectedIndex] = {...data}\r\n                    ToastMessage({ type: \"success\", message: \"Successfully updated!\", timeout: 1500 });\r\n                } else {\r\n                    dataRef.current.list.push({...data});\r\n                    ToastMessage({ type: \"success\", message: \"Successfully Registered!\", timeout: 1500 });\r\n                }\r\n                dataRef.current.toggleModal();\r\n                //uiRefresh(Date.now());\r\n            }\r\n        };\r\n        apiCall();\r\n        // eslint-disable-next-line\r\n    },[regRef.current.formChanges]);\r\n    return (\r\n        <form noValidate onSubmit={e=>formSubmit(e)} className=\"w-full\">\r\n            <div className=\"container w-full flex-1 flex flex-col items-center justify-center\">\r\n                <div className=\"bg-white px-2 py-6 rounded text-black w-full\">\r\n                    <div className=\"relative w-full px-2\">\r\n                        <FontAwesomeIcon icon={faTimes} className=\"absolute top-2 right-5 cursor-pointer\" onClick={dataRef.current.toggleModal}/>\r\n                        <h1 className=\"mb-8 text-3xl\">{isNew.current ? 'New Registration' : 'Edit Registration'}</h1>\r\n                    </div>\r\n                    <Scrollbars className=\"overflow-auto\" style={{height: \"70vh\"}}>\r\n                        <div className=\"p-5\">\r\n                            <InputText styleClass=\"flex flex-col mb-4 \" formKey=\"name\" formRef={regRef} uiRefresh={ui} label=\"Name\" placeholder=\"Name\" required=\"Name is required\"/>\r\n                            <InputEmail styleClass=\"flex flex-col mb-4\" formKey=\"username\" formRef={regRef} uiRefresh={ui} label=\"Email\" placeholder=\"Email\" required=\"Email is required\" disabled={!isNew.current}/>\r\n                            {isNew.current && <PasswordCheck styleClass=\"flex flex-col mb-4\" formKey=\"password\" ui={ui} formRef={regRef} uiRefresh={ui}/>}\r\n                            <InputRadio styleClass=\"flex flex-col mb-3\" formKey=\"business\" formRef={regRef} ui={ui} name=\"business\" label=\"Individual/Business\" values={['Individual', 'Business']} required=\"Individual/Business is required\"/>\r\n                            <InputDOB styleClass=\"flex flex-col mb-4\" formKey=\"dob\" ID=\"dob\" formRef={regRef} uiRefresh={ui} label=\"DOB\" placeholder=\"DOB\" required=\"Date of birth is required\" callback={dobCallback}/>\r\n                            <InputRadio styleClass=\"flex flex-col mb-3\" formKey=\"gender\" formRef={regRef} ui={ui} name=\"gender\" label=\"Gender\" values={['Male', 'Female', 'Other']} icons={[faMale, faFemale]} required=\"This field is required\"/>\r\n                            <InputText styleClass=\"flex flex-col mb-4\" formKey=\"city\" formRef={regRef} uiRefresh={ui} label=\"Country/City\" placeholder=\"Country/City\" required=\"Country/City is required\"/>\r\n                            <InputText styleClass=\"flex flex-col mb-4\" formKey=\"zipcode\" formRef={regRef} uiRefresh={ui} label=\"Zip/Postal\" placeholder=\"Zip/Postal\" required=\"Zip/Postal is required\"/>\r\n                            <InputSelect styleClass=\"flex flex-col mb-4 \" formKey=\"country\" formRef={regRef} uiRefresh={ui} label=\"Country\" options={[\"United State\", \"India\"]} placeholder=\"Select country\" required=\"Country is required\" callback={countryCallback}/>\r\n                            <InputSelect styleClass=\"flex flex-col mb-4\" formKey=\"state\" ID=\"state\" formRef={regRef} uiRefresh={ui} label=\"State\" options={stateList.current[regRef.current.country]||[]} placeholder=\"Select state\" required=\"State is required\" callback={stateCallback}/>\r\n                            <InputPhone styleClass=\"flex flex-col mb-4\" formKey=\"phone\" ID=\"phone\" formRef={regRef} uiRefresh={ui} label=\"Phone\" code=\"phonecode\" placeholder=\"Phone/Mobile\" required=\"Phone is required\"/>\r\n                            <InputRadio styleClass=\"flex flex-col mb-4\" formKey=\"minor\" formRef={regRef} ui={ui} name=\"minor\" label=\"Is the user being minor (less than 18 years old)\" values={['Yes', 'No']} required=\"This field is required\"/>\r\n                            <InputRadio styleClass=\"flex flex-col mb-4\" formKey=\"approved\" formRef={regRef} ui={ui} name=\"approved\" label=\"Approved\" icons={[faUserCheck, faUserTimes]} values={['Yes', 'No']} colors={['rgb(101 163 13)', 'rgb(239 68 68)']} required=\"This field is required\"/>\r\n                            <div className=\"flex mb-4 justify-center\">\r\n                                <button \r\n                                    className=\"h-14 px-12 m-2 text-indigo-100 transition-colors duration-150 bg-dodge-b rounded-full shadow-md shadow-gray-500 focus:shadow-outline hover:bg-dodge-d\"\r\n                                >\r\n                                    {regRef.current.isLoading ?<div className=\"w-12 flex justify-center\"><TinyLoader/></div>: <>Submit</>}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </Scrollbars>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    );\r\n});\r\n\r\nexport default UserPanelDialog;"]},"metadata":{},"sourceType":"module"}