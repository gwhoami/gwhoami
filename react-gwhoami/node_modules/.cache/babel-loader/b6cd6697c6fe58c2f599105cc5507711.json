{"ast":null,"code":"var _jsxFileName = \"D:\\\\Git-Repo\\\\gwhoami\\\\react-gwhoami\\\\src\\\\container\\\\userGrid.js\",\n    _s = $RefreshSig$();\n\nimport { faTrashAlt, faUserCheck, faUserEdit, faUserTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { apiGetCall } from \"../helper/API\";\nimport { TinyLoader } from \"../helper/formElements\";\nimport ToastMessage from \"../toast\";\nimport { MainContext } from \"../util/maincontext\";\nimport { Oval } from 'react-loader-spinner';\nimport ReactModal from \"react-modal\";\nimport UserPanelDialog from \"../modalDialog/userPanel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserGrid = /*#__PURE__*/_s( /*#__PURE__*/React.memo(_c = _s(() => {\n  _s();\n\n  const [ui, uiRefresh] = useState(-1);\n  const gridData = useRef({\n    list: [],\n    initLoad: false,\n    isOpen: false,\n    selectedIndex: -1,\n    toggleModal: () => {\n      // dataRef.current.recIdx = -1;\n      // dataRef.current.selRec = {x: '0', y: '0', show: false, cx: -1, cy: -1, added: false, countryName: '', Id: getRowId(8)}\n      gridData.current.isOpen = !gridData.current.isOpen;\n      uiRefresh(Date.now());\n    }\n  });\n  const {\n    showAlert\n  } = useContext(MainContext);\n  useEffect(() => {\n    (async () => {\n      const res = await apiGetCall('/api/user/userinfo', {});\n\n      if (res.isError) {\n        ToastMessage({\n          type: \"error\",\n          message: res.Error.stack,\n          timeout: 1500\n        });\n      } else {\n        gridData.current.initLoad = true;\n        gridData.current.list = res;\n        uiRefresh(Date.now());\n      }\n    })();\n  }, []);\n\n  const editRecord = idx => {\n    gridData.current.selectedIndex = idx;\n    gridData.current.toggleModal();\n  };\n\n  const removeRecord = (row, idx) => {\n    showAlert({\n      type: 'confirm',\n      title: 'Are you sure to delete?',\n      callback: msg => {\n        if (msg === 'no') return;\n        row.loader = true;\n        uiRefresh(Date.now());\n\n        (async () => {\n          const res = await apiGetCall('/api/user/removeuser', {\n            id: row._id\n          });\n\n          if (res.isError) {\n            ToastMessage({\n              type: \"error\",\n              message: res.Error.stack,\n              timeout: 1500\n            });\n          } else {\n            gridData.current.list.splice(idx, 1);\n            uiRefresh(Date.now());\n          }\n        })();\n      }\n    });\n  };\n\n  const afterOpenModal = () => {\n    document.querySelector('div.mymodal').classList.add('slideshow');\n  };\n\n  if (!gridData.current.initLoad) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full bg-gray-100 flex justify-center items-center\",\n    children: /*#__PURE__*/_jsxDEV(Oval, {\n      secondaryColor: \"gray\",\n      color: \"#1e90ff\",\n      height: 80,\n      width: 80\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 92\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 16\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ReactModal, {\n      isOpen: gridData.current.isOpen,\n      onRequestClose: gridData.current.toggleModal,\n      contentLabel: \"My dialog\",\n      onAfterOpen: afterOpenModal,\n      className: \"mymodal max-w-xl w-full\",\n      overlayClassName: \"myoverlay\",\n      closeTimeoutMS: 500,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: /*#__PURE__*/_jsxDEV(UserPanelDialog, {\n          uiref: ui,\n          dataRef: gridData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center h-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col mt-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"h-12 px-12 m-2 text-indigo-100 transition-colors duration-150 bg-dodge-b rounded-full shadow-md shadow-gray-500 focus:shadow-outline hover:bg-dodge-d\",\n            onClick: _ => editRecord(-1),\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center w-28 bg-sky-b p-1 leading-5\",\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-36 bg-sky-b p-1 leading-5\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-24 bg-sky-b p-1\",\n            children: \"DOB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-60 bg-sky-b p-1\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-36 bg-sky-b p-1\",\n            children: \"Country\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-16 bg-sky-b p-1\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border flex border-black justify-center items-center border-l-0 w-16 bg-sky-b p-1\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), gridData.current.list.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-32 w-full border border-black border-t-0 flex justify-center items-center text-red-500\",\n          children: \"No record found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 56\n        }, this), gridData.current.list.map((row, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex text-sm${row.loader ? ' relative' : ''}`,\n          children: [row.loader && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute left-0 top-0 w-full h-full bg-gray-100 flex justify-center items-center border border-black border-t-0\",\n            children: /*#__PURE__*/_jsxDEV(TinyLoader, {\n              color: \"#1e90ff\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 169\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 40\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-start items-center border border-black border-t-0 p-1.5 bg-white w-28`,\n            children: row.approved === 'Yes' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUserCheck,\n                className: \"ml-1 mr-2 text-green-700 text-base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 35\n              }, this), \" Approved\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUserTimes,\n                className: \"ml-1 mr-2 text-red-700 text-base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 35\n              }, this), \" Pending\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-36`,\n            children: row.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-24`,\n            children: new Date(row.dob).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center border border-black border-t-0 border-l-0 py-1.5 px-2 bg-white w-60`,\n            children: row.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-center items-center border border-black border-t-0 border-l-0 p-1 bg-white w-36`,\n            children: row.country\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-center items-center border border-black border-t-0 border-l-0 p-1 bg-white w-16 text-base`,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faUserEdit,\n              className: \"cursor-pointer hover:text-dodge-b\",\n              onClick: _ => editRecord(idx)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-16 text-base`,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTrashAlt,\n              className: \"cursor-pointer hover:text-red-700\",\n              onClick: _ => removeRecord(row, idx)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"wyKGPwEpGgHz+mg4qlTl4D2Fxwo=\")), \"wyKGPwEpGgHz+mg4qlTl4D2Fxwo=\");\n\n_c2 = UserGrid;\nexport default UserGrid;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserGrid$React.memo\");\n$RefreshReg$(_c2, \"UserGrid\");","map":{"version":3,"sources":["D:/Git-Repo/gwhoami/react-gwhoami/src/container/userGrid.js"],"names":["faTrashAlt","faUserCheck","faUserEdit","faUserTimes","FontAwesomeIcon","React","useContext","useEffect","useRef","useState","apiGetCall","TinyLoader","ToastMessage","MainContext","Oval","ReactModal","UserPanelDialog","UserGrid","memo","ui","uiRefresh","gridData","list","initLoad","isOpen","selectedIndex","toggleModal","current","Date","now","showAlert","res","isError","type","message","Error","stack","timeout","editRecord","idx","removeRecord","row","title","callback","msg","loader","id","_id","splice","afterOpenModal","document","querySelector","classList","add","_","length","map","approved","name","dob","toLocaleDateString","username","country"],"mappings":"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","sourcesContent":["import { faTrashAlt, faUserCheck, faUserEdit, faUserTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { apiGetCall } from \"../helper/API\";\r\nimport { TinyLoader } from \"../helper/formElements\";\r\nimport ToastMessage from \"../toast\";\r\nimport { MainContext } from \"../util/maincontext\";\r\nimport {Oval} from 'react-loader-spinner';\r\nimport ReactModal from \"react-modal\";\r\nimport UserPanelDialog from \"../modalDialog/userPanel\";\r\n\r\nconst UserGrid = React.memo(() => {\r\n    const [ui, uiRefresh] = useState(-1);\r\n    const gridData = useRef({\r\n        list: [], \r\n        initLoad: false,\r\n        isOpen: false,\r\n        selectedIndex: -1,\r\n        toggleModal: ()=> {\r\n            // dataRef.current.recIdx = -1;\r\n            // dataRef.current.selRec = {x: '0', y: '0', show: false, cx: -1, cy: -1, added: false, countryName: '', Id: getRowId(8)}\r\n            gridData.current.isOpen = !gridData.current.isOpen;\r\n            uiRefresh(Date.now());\r\n        }\r\n    });\r\n    const {showAlert} = useContext(MainContext);\r\n    useEffect(()=>{\r\n        (async()=>{\r\n            const res = await apiGetCall('/api/user/userinfo',{});\r\n            if (res.isError) {\r\n               ToastMessage({ type: \"error\", message: res.Error.stack, timeout: 1500 });\r\n            } else {\r\n                gridData.current.initLoad = true;\r\n                gridData.current.list = res;\r\n                uiRefresh(Date.now());\r\n            }\r\n        })();\r\n    }, []);\r\n    const editRecord = (idx) => {\r\n        gridData.current.selectedIndex = idx;\r\n        gridData.current.toggleModal();\r\n    }\r\n    const removeRecord = (row, idx) => {\r\n        showAlert({type: 'confirm', title: 'Are you sure to delete?', callback: (msg) => {\r\n            if (msg === 'no') return;\r\n            row.loader = true;\r\n            uiRefresh(Date.now());\r\n            (async()=> {\r\n                const res = await apiGetCall('/api/user/removeuser', {id: row._id});\r\n                if (res.isError) {\r\n                    ToastMessage({ type: \"error\", message: res.Error.stack, timeout: 1500 });\r\n                 } else {\r\n                     gridData.current.list.splice(idx, 1);\r\n                     uiRefresh(Date.now());\r\n                 }\r\n            })();\r\n        }});\r\n    }\r\n    const afterOpenModal = () => {\r\n        document.querySelector('div.mymodal').classList.add('slideshow');\r\n    }\r\n    if (!gridData.current.initLoad)\r\n        return <div className=\"w-full h-full bg-gray-100 flex justify-center items-center\"><Oval secondaryColor=\"gray\" color=\"#1e90ff\" height={80} width={80} /></div>\r\n    return (\r\n        <>\r\n        <ReactModal\r\n            isOpen={gridData.current.isOpen}\r\n            onRequestClose={gridData.current.toggleModal}\r\n            contentLabel=\"My dialog\"\r\n            onAfterOpen={afterOpenModal}\r\n            className=\"mymodal max-w-xl w-full\"\r\n            overlayClassName=\"myoverlay\"\r\n            closeTimeoutMS={500}\r\n        >\r\n            <div className=\"flex\">\r\n                <UserPanelDialog uiref={ui} dataRef={gridData}/>\r\n            </div>\r\n      </ReactModal>\r\n        <div className=\"flex justify-center h-full\">\r\n            <div className=\"flex flex-col mt-20\">\r\n                <div className=\"flex justify-end mb-4\">\r\n                    <button \r\n                        className=\"h-12 px-12 m-2 text-indigo-100 transition-colors duration-150 bg-dodge-b rounded-full shadow-md shadow-gray-500 focus:shadow-outline hover:bg-dodge-d\"\r\n                        onClick={_=>editRecord(-1)}\r\n                    >\r\n                        Add\r\n                    </button>\r\n                </div>\r\n                <div className=\"flex\">\r\n                    <div className=\"border flex border-black justify-center items-center w-28 bg-sky-b p-1 leading-5\">Status</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-36 bg-sky-b p-1 leading-5\">Name</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-24 bg-sky-b p-1\">DOB</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-60 bg-sky-b p-1\">Username</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-36 bg-sky-b p-1\">Country</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-16 bg-sky-b p-1\">Edit</div>\r\n                    <div className=\"border flex border-black justify-center items-center border-l-0 w-16 bg-sky-b p-1\">Delete</div>\r\n                </div>\r\n                {gridData.current.list.length === 0 && <div className=\"h-32 w-full border border-black border-t-0 flex justify-center items-center text-red-500\">No record found</div>}\r\n                {gridData.current.list.map((row, idx)=>(\r\n                    <div key={idx} className={`flex text-sm${row.loader ? ' relative': ''}`}>\r\n                        {row.loader && <div className=\"absolute left-0 top-0 w-full h-full bg-gray-100 flex justify-center items-center border border-black border-t-0\"><TinyLoader color=\"#1e90ff\"/></div>}\r\n                        <div className={`flex justify-start items-center border border-black border-t-0 p-1.5 bg-white w-28`}>\r\n                            {row.approved === 'Yes' ?\r\n                                <><FontAwesomeIcon icon={faUserCheck} className=\"ml-1 mr-2 text-green-700 text-base\"/> Approved</>:\r\n                                <><FontAwesomeIcon icon={faUserTimes} className=\"ml-1 mr-2 text-red-700 text-base\"/> Pending</>\r\n                            }\r\n                        </div>\r\n                        <div className={`flex items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-36`}>{row.name}</div>\r\n                        <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-24`}>{new Date(row.dob).toLocaleDateString()}</div>\r\n                        <div className={`flex items-center border border-black border-t-0 border-l-0 py-1.5 px-2 bg-white w-60`}>{row.username}</div>\r\n                        <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1 bg-white w-36`}>{row.country}</div>\r\n                        <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1 bg-white w-16 text-base`}>\r\n                            <FontAwesomeIcon icon={faUserEdit} className=\"cursor-pointer hover:text-dodge-b\" onClick={_=>editRecord(idx)}/>\r\n                        </div>\r\n                        <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-16 text-base`}>\r\n                            <FontAwesomeIcon icon={faTrashAlt} className=\"cursor-pointer hover:text-red-700\" onClick={_=>removeRecord(row, idx)}/>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                {/* <div className=\"flex text-sm\">\r\n                    <div className={`flex justify-start items-center border border-black border-t-0 p-1.5 bg-white w-28`}>\r\n                    <FontAwesomeIcon icon={faUserCheck} className=\"ml-1 mr-2 text-green-700 text-base\"/> Approved\r\n                    </div>\r\n                    <div className={`flex items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-36`}>Ajith Kumar</div>\r\n                    <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-24`}>05/31/1971</div>\r\n                    <div className={`flex items-center border border-black border-t-0 border-l-0 py-1.5 px-2 bg-white w-60`}>m.sumansavio@gmail.com</div>\r\n                    <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-36`}>USA</div>\r\n                    <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-16 text-base`}>\r\n                        <FontAwesomeIcon icon={faUserEdit} className=\"cursor-pointer hover:text-dodge-b\"/>\r\n                    </div>\r\n                    <div className={`flex justify-center items-center border border-black border-t-0 border-l-0 p-1.5 bg-white w-16 text-base`}>\r\n                        <FontAwesomeIcon icon={faTrashAlt} className=\"cursor-pointer hover:text-red-700\"/>\r\n                    </div>\r\n                </div> */}\r\n            </div>\r\n        </div>\r\n        </>\r\n    );\r\n});\r\n\r\nexport default UserGrid;"]},"metadata":{},"sourceType":"module"}